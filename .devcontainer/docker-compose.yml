services:
    common-devcontainer:
        network_mode: host
        image: common-devcontainer
        container_name: common-devcontainer
        build:
            context: ..
            dockerfile: .devcontainer/Dockerfile
            args:
                - PYTHON_VERSION
                - PIP_VERSION
                - DEVCONTAINER_USER
        volumes:
            - ..:/workspace:cached
            - ../resources/:/resources
        # This keeps the devcontainer running.
        entrypoint: [ "tail", "-f", "/dev/null" ]

    redis-cache-redis:
        image: redis:${REDIS_VERSION}
        container_name: redis-cache-redis
        ports:
            - "6379:6379"
        volumes:
            - $PWD/resources/cache/redis:/data
